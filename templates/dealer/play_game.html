{% load static %}
<!doctype html>
<html lang="en">


<!-- Mirrored from www.wrraptheme.com/templates/lucid/html/light/index7.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 09 Sep 2023 12:05:13 GMT -->
<head>
<title>DEALER</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<meta name="description" content="Lucid Bootstrap 4.1.1 Admin Template">
<meta name="author" content="WrapTheme, design by: ThemeMakker.com">

<link rel="icon" href="{% static 'outgoing-call.png' %}" type="image/x-icon">
<!-- VENDOR CSS -->
<link rel="stylesheet" href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}">
<link rel="stylesheet" href="{% static 'vendor/font-awesome/css/font-awesome.min.css' %}">
<link rel="stylesheet" href="{% static 'vendor/chartist/css/chartist.min.css' %}">
<link rel="stylesheet" href="{% static 'vendor/chartist-plugin-tooltip/chartist-plugin-tooltip.css' %}">
<link rel="stylesheet" href="{% static 'vendor/jvectormap/jquery-jvectormap-2.0.3.min.css' %}"/>
<link rel="stylesheet" href="{% static 'vendor/jquery-datatable/dataTables.bootstrap4.min.css' %}">

<!-- MAIN CSS -->
<link rel="stylesheet" href="{% static 'css/main.css' %}">
<link rel="stylesheet" href="{% static 'css/color_skins.css' %}">
</head>
<nav class="navbar navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-btn">
            <button type="button" class="btn-toggle-offcanvas"><i class="lnr lnr-menu fa fa-bars"></i></button>
        </div>
        <h6>{{time.game_time}} [ {{request.user}} ]</h6>
        <button onclick="saveDataToViews()" class="btn btn-success" title="Save">
            <span class="sr-only">Save</span>
            <i class="fa fa-save"></i>
        </button>
        <div class="navbar-brand">
            <a href="{% url 'dealer:index' %}"><img src="" class="img-responsive logo"></a>     
            <label class="control-inline fancy-checkbox ml-auto">
                <input type="checkbox" name="checkbox2" required data-parsley-mincheck="2"
                    data-parsley-errors-container="#error-checkbox2" id="R">
                <span>R</span>
            </label>           
        </div>
        
        <div class="navbar-right">
           

            
        </div>
    </div>
</nav>
<div id="left-sidebar" class="sidebar">
    <div class="sidebar-scroll">
        <div class="user-account">
            
            <div class="dropdown">
                <span>Welcome,</span>
                <a href="javascript:void(0);" class="dropdown-toggle user-name" data-toggle="dropdown"><strong>{{request.user}} (Dealer)</strong></a>
                <ul class="dropdown-menu dropdown-menu-right account">
                    <li><a href="{% url 'website:logout' %}"><i class="icon-power"></i>Logout</a></li>
                </ul>
            </div>
            <hr>
          
        </div>
        <!-- Nav tabs -->
      
            
        <!-- Tab panes -->
        <div class="tab-content p-l-0 p-r-0">
            <div class="tab-pane active" id="menu">
                <nav id="left-sidebar-nav" class="sidebar-nav">
                    <ul id="main-menu" class="metismenu">                            
                        <li class="active">
                           
                                <a href="{% url 'dealer:index' %}" ><i class="icon-home"></i> <span>Dashboard</span></a>

                            </li>
                            <li>
                                <a href="{% url 'dealer:sales_report' %}" ><i class="icon-notebook"></i> <span>Sales Report</span></a>
                              
                            </li>
                            <li>
                                <a href="{% url 'dealer:daily_report' %}" ><i class="icon-book-open"></i> <span>Daily Report</span></a>
                              
                            </li>
                        <li>
                            <a href="{% url 'dealer:result' %}" ><i class="icon-trophy"></i> <span>Result</span></a>
                          
                        </li>
                      
                        <li>
                            <a href=" {% url 'dealer:edit_bill_times' %}"><i class="icon-book-open "></i> <span>Edit Bill</span></a>
                         
                        </li>
                        <li>
                            <a href="#uiElements" class="has-arrow"><i class="icon-grid"></i> <span>Reports</span></a>
                            <ul>
                                <li><a href="{% url 'dealer:winning_report' %}">Winning Report</a></li>   

                                <li><a href="{% url 'dealer:count_salereport' %}">Sales Count Report</a></li>

                                <li><a href="{% url 'dealer:winning_countreport' %}">Count Winning Report</a></li> 
                                <li><a href="{% url 'dealer:balance_report' %}">Balance Report</a></li>                             
                              
                           
                            </ul>
                        </li>
                        <li>
                            <a href="{% url 'dealer:change_password' %}" ><i class="icon-wrench"></i> <span>Change Password</span></a>
                           
                        </li>
                        
                       
                     
                    </ul>
                </nav>
            </div>
              
        </div>          
    </div>
</div>
<body class="theme-cyan" style="background-color:lightcyan;">
  <!-- Page Loader -->
<!-- Overlay For Sidebars -->

<div id="wrapper">

<style>
    .navbar-brand{
        padding: 10px !important;
    }
    #main-content{
        margin-top: 50px !important;
    }
     .navbar-bottom {
        position: fixed;
        bottom: 0;
        width: 100%;
        height: 55px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
        background-color: #ffffff;
        overflow-x: auto;
        justify-content: space-evenly;
        display: flex;
        flex-direction: column;
    }
    .bgtext {
        position: relative;
    }

    .bgtext:before {
        content: "{{time.game_time}} "; /* Replace with your desired background text */
        position: absolute;
        top: 50%;
        left: 50%;
        opacity: 0.3;
        transition: 0.3s;
        font-weight: bold;
        transform: translate(-50%, -50%); /* Center the text */
        font-size: 30px; /* Adjust the font size as needed */
        color:rgb(136, 135, 135); /* Set the color and opacity of the background text */
        pointer-events: none; /* Ignore mouse events on the background text */
    }
    #mainTable th {
        position: sticky;
        top: 0;
        z-index: 1;
        background-color: white;
        padding: 0px;
        /* To make it appear above the content */
    }

    /* Define a custom class for the selected button */
    .selected-button {
        background-color: #007bff; /* Change the background color to blue */
        color: #fff; /* Change the text color to white for better contrast */
    }

        /* CSS for the modal */
    .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        justify-content: center;
        align-items: center;
        z-index: 999;
    }

    .modal-content {
        background-color: #fff;
        width: 300px;
        margin: 100px auto;
        padding: 20px;
        border: 1px solid #333;
        border-radius: 5px;
    }

    .close {
        float: right;
        cursor: pointer;
    }

    .nav-tabs-new>li>a{
        background-color: rgb(255, 0, 119);
        color: white;
    }

    .table td{
        padding: 0px 0px 0px 0px !important;
    }

/* Add more CSS styling as needed */



.white_bg 
{
    background-color: #ffffff;
    padding: 3px; /*add this if you want a bit of space around the text*/
}

th, td{
        text-align: center;
    }

.nav-tabs-new>li>a.active{
    border: 1px solid #eee !important;
    background: rgb(255, 0, 119) !important;
    color: #fff;
}

</style>

<div id="main-content">
    
    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-info">
        {{message}}
    </div>
    {% endfor %}
    {% endif %}

    <div class="container-fluid mt-3">
        <div class="row clearfix">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <div class="card" style="margin-bottom: 0px !important;" id="background">
                    <form method="POST">
    
                        <div class="body" style="padding: 10px !important; ">
                            <div class="row clearfix">
                                <div class="col-lg-3 col-6">
                                    <div class="btn-group mr-2" role="group" aria-label="First group">
                                        <button type="button" class="btn btn-secondary" id="button1">1</button>
                                        <button type="button" class="btn btn-secondary" id="button2">2</button>
                                        <button type="button" class="btn btn-secondary selected-button" id="button3">3</button>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-6">
                                    <div class="mb-3">
                                        <input type="text" class="form-control" name="customer" id="customer">
                                    </div>
                                </div>
                            </div>
                            
                            <div id="defaultFields" class="row">
                                <div class="form-group col-lg-3 col-6">
                                    <input type="number" class="form-control" id="numberInput" placeholder="Number"
                                        required autocomplete="off">
                                </div>
                                <div class="form-group col-lg-3 col-6">
                                    <input type="number" class="form-control" id="countInput" placeholder="Count"
                                        required oninput="validateCountInput(this)" autocomplete="off">
                                </div>
                            </div>

                            <!-- only show when R is chacked -->
                            <div id="conditionalFields" class="row">
                                <div class="form-group col-lg-3 col-3">
                                    <input type="number" class="form-control" id="start" placeholder="Start" required autocomplete="off">
                                </div>
                                <div class="form-group col-lg-3 col-3">
                                    <input type="number" class="form-control" id="end" placeholder="End" required autocomplete="off">
                                </div>
                                <div class="form-group col-lg-3 col-3">
                                    <input type="number" class="form-control" id="step" placeholder="Step" required autocomplete="off">
                                </div>
                                <div class="form-group col-lg-3 col-3">
                                    <input type="number" class="form-control" id="count" placeholder="Count" required autocomplete="off">
                                </div>
                            </div>
                            <!-- only show when R is chacked -->

                            <div class="tab-content" style="padding: 0px !important;">
                                <div class="tab-pane" id="tabSet1">
                                    
                                    <ul class="nav nav-tabs-new d-flex justify-content-center">
                                        <li class="nav-item flex-fill  text-center"><a class="nav-link" data-toggle="tab" id="A" href="">A</a>
                                        </li>
                                        <li class="nav-item flex-fill  text-center"><a class="nav-link" data-toggle="tab" id="B" href="">B</a>
                                        </li>
                                        <li class="nav-item flex-fill  text-center"><a class="nav-link" data-toggle="tab" id="C" href="">C</a>
                                        </li>
                                        <li class="nav-item flex-fill  text-center"><a class="nav-link" data-toggle="tab" id="ALL1"
                                                href="">ALL</a></li>
                                    </ul>
                                </div>
                                <div class="tab-pane" id="tabSet2">
                                    <ul class="nav nav-tabs-new d-flex justify-content-center">
                                        <li class="nav-item flex-fill  text-center"><a class="nav-link" data-toggle="tab" id="AB"
                                                href="">AB</a></li>
                                        <li class="nav-item flex-fill  text-center"><a class="nav-link" data-toggle="tab" id="BC"
                                                href="">BC</a></li>
                                        <li class="nav-item flex-fill  text-center"><a class="nav-link" data-toggle="tab" id="AC"
                                                href="">AC</a></li>
                                        <li class="nav-item flex-fill  text-center"><a class="nav-link" data-toggle="tab" id="ALL2"
                                                href="">ALL</a></li>
                                    </ul>
                                </div>
                                <div class="tab-pane show active row" id="tabSet3">
                                    <ul class="nav nav-tabs-new d-flex justify-content-center">
                                        <li class="nav-item flex-fill  text-center">
                                            <a class="nav-link" data-toggle="tab" id="Super" href="#">Super</a>
                                        </li>
                                        <li class="nav-item flex-fill   text-center">
                                            <a class="nav-link" data-toggle="tab" id="ButtonBox" href="#">Box</a>
                                        </li>
                                        <li class="nav-item flex-fill  text-center">
                                            <a class="nav-link" data-toggle="tab" id="KBox" href="#">K.Box</a>
                                        </li>
                                        <li class="nav-item flex-fill  text-center">
                                            <a class="nav-link" data-toggle="tab" id="Both" href="#">Both</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                        </div>


                    </form>
                </div>
            </div>
        </div>

    </div>

    <div class="container-fluid">
       
        <div class="row clearfix ">
            <div class="col-lg-12" style="padding-top: 0px;">

                
                <div class="card bgtext " style="background-color:antiquewhite; padding-left: 1px;padding-right: 1px;">
                    
                    <div class="body " style="padding: 0px !important;">
                        
                        <div class="table-container" style="max-height: 500px; overflow-y: auto;">
                           
                            <table id="mainTable" class="table table-hover " style="table-layout: fixed; width: 100%;">
                                
                                <thead>
                                    <!-- <tr>
                                        <th colspan="2">Count: <span id="totalCount">{{total_count}}</span></th>
                                        <th colspan="2">AMT: <span id="totalDAmount">{{total_d_amount|floatformat:2}}</span></th>
                                        <th colspan="2">TOT: <span id="totalCAmount">{{total_c_amount|floatformat:2}}</span></th>
                                    </tr> -->
                                    <tr >
                                        <th class="l-blue">LSK</th>
                                        <th class="l-blue">No</th>
                                        <th class="l-blue">Count</th>
                                        <th class="l-blue">D.AMT</th>
                                        <th class="l-blue" >C.AMT</th>
                                        <th class="l-blue">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                   
                                    {% for row in rows %}
                                    <tr data-row-id="{{ row.id }}">
                                        <td>{{row.LSK}}</td>
                                        <td>{{row.number}}</td>
                                        <td>{{row.count}}</td>
                                        <td>{{row.d_amount|floatformat:2}}</td>
                                        <td>{{row.c_amount|floatformat:2}}</td>
                                        <td><button type="button" onclick="editRow(this)" class="btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    

    <div id="editModal" class="modal">
        <div class="modal-content">
            <h6>LSK: <span id="modalRowLSK"></span></h6>
            <h6>Number: <span id="modalRowNumber"></span></h6>
            <h6>Count: <span id="modalRowCount"></span></h6>
            <div class="form-group mt-3">
                <input type="text" class="form-control" id="editedCount" placeholder="Change Count" required>
            </div>
            <div class="body">
                <button type="button" onclick="closeModal()" class="btn btn-primary">Cancel</button>
                <button type="button" onclick="updateRow()" class="btn btn-warning">Update</button>
                <button type="button" onclick="deleteRow()" class="btn btn-danger">Delete</button>
            </div>
        </div>
    </div>
</div>
<nav class="navbar-bottom l-parpl" >
    <table>
        <thead>
            <tr>
                <th class="th"> Count</th>
                <th class="th">Amount</th>
                <th class="th">TOT</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td class="td" id="totalCount">{{total_count}}</td>
                <td class="td" id="totalDAmount">{{total_d_amount|floatformat:2}}</td>
                <td class="td" id="totalCAmount">{{total_c_amount|floatformat:2}}</td>
            </tr>
        </tbody>
    </table>
</nav>

<h1 id="bill-id" style="display: none;">{{bill_id.id}}</h1>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<script>
    var rowId = {{ row_id }};
</script>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        // When the page is fully loaded, focus on the input element
        var inputElement = document.getElementById("numberInput");
        if (inputElement) {
            inputElement.focus();
        }
    });
</script>

<script>

    var button1 = document.getElementById("button1");
    var button2 = document.getElementById("button2");
    var button3 = document.getElementById("button3");

    var numberInput = document.getElementById("numberInput");
    var countInput = document.getElementById("countInput");

    var startInput = document.getElementById("start")
    var endInput = document.getElementById("end")
    var stepInput = document.getElementById("step")
    var countInput2 = document.getElementById("count")

    var maxDigits = 3;

    var maxCount = 2;

    countInput.addEventListener("input", function () {
            if (countInput.value.length > maxCount) {
                countInput.value = countInput.value.slice(0, maxCount);
            }
    });

    countInput2.addEventListener("input", function () {
            if (countInput2.value.length > maxCount) {
                countInput2.value = countInput2.value.slice(0, maxCount);
            }
    });

    button1.addEventListener("click", function () {
        maxDigits = 1;
        maxCount = 3;
        maxValue = 500;
        numberInput.value = "";
        numberInput.maxLength = maxDigits;
        numberInput.focus();
        countInput.value = "";
        countInput2.value = "";
        endInput.value = "";
        stepInput.value = "";
        countInput.addEventListener("input", function () {
            if (countInput.value.length > maxCount) {
                countInput.value = countInput.value.slice(0, maxCount);
            }
            if (parseInt(countInput.value) > maxValue) {
                countInput.value = maxValue.toString();
            }
        });
        countInput2.addEventListener("input", function () {
            if (countInput2.value.length > maxCount) {
                countInput2.value = countInput2.value.slice(0, maxCount);
            }
            if (parseInt(countInput2.value) > maxValue) {
                countInput2.value = maxValue.toString();
            }
    });
    });

    button2.addEventListener("click", function () {
        maxDigits = 2;
        maxCount = 3;
        maxValue = 500;
        numberInput.value = "";
        numberInput.maxLength = maxDigits;
        numberInput.focus();
        countInput.value = "";
        countInput2.value = "";
        endInput.value = "";
        stepInput.value = "";
        countInput.addEventListener("input", function () {
            if (countInput.value.length > maxCount) {
                countInput.value = countInput.value.slice(0, maxCount);
            }
            if (parseInt(countInput.value) > maxValue) {
                countInput.value = maxValue.toString();
            }
        });
        countInput2.addEventListener("input", function () {
            if (countInput2.value.length > maxCount) {
                countInput2.value = countInput2.value.slice(0, maxCount);
            }
            if (parseInt(countInput2.value) > maxValue) {
                countInput2.value = maxValue.toString();
            }
    });
    });

    button3.addEventListener("click", function () {
        maxDigits = 3;
        maxCount = 2;
        numberInput.value = "";
        numberInput.maxLength = maxDigits;
        numberInput.focus();
        countInput.value = "";
        countInput2.value = "";
        endInput.value = "";
        stepInput.value = "";
        countInput.addEventListener("input", function () {
            if (countInput.value.length > maxCount) {
                countInput.value = countInput.value.slice(0, maxCount);
            }
        });
        countInput2.addEventListener("input", function () {
            if (countInput2.value.length > maxCount) {
                countInput2.value = countInput2.value.slice(0, maxCount);
            }
    });
    });

    button1.addEventListener("click", function () {
        maxDigits = 1;
        startInput.value = "";
        startInput.maxLength = maxDigits;
        startInput.focus();
    });

    button2.addEventListener("click", function () {
        maxDigits = 2;
        startInput.value = "";
        startInput.maxLength = maxDigits;
        startInput.focus();
    });

    button3.addEventListener("click", function () {
        maxDigits = 3;
        startInput.value = "";
        startInput.maxLength = maxDigits;
        startInput.focus();
    });

    numberInput.addEventListener("input", function () {
        if (numberInput.value.length === maxDigits) {
            countInput.focus();
        }
    });

    startInput.addEventListener("input", function () {
        if (startInput.value.length === maxDigits) {
            endInput.focus();
        }
    });

    endInput.addEventListener("input", function () {
        if (endInput.value.length === maxDigits) {
            stepInput.focus();
        }
    });

    stepInput.addEventListener("input", function () {
        if (stepInput.value.length === maxDigits) {
            countInput2.focus();
        }
    });

</script>


<script>
    var agentPackageData = {
        package_name: "{{ agent_package.package_name }}",
        single_rate: {{ agent_package.single_rate }},
        single_dc: {{ agent_package.single_dc }},
        double_rate: {{ agent_package.double_rate }},
        double_dc: {{ agent_package.double_dc }},
        super_rate: {{ agent_package.super_rate }},
        super_dc: {{ agent_package.super_dc }},
        box_rate: {{ agent_package.box_rate }},
        box_dc: {{ agent_package.box_dc }},
    };
    var singleRate = agentPackageData.single_rate;
    var singleDC = agentPackageData.single_dc;
    var doubleRate = agentPackageData.double_rate;
    var doubleDC = agentPackageData.double_dc;
    var superRate = agentPackageData.super_rate;
    var superDC = agentPackageData.super_dc;
    var boxRate = agentPackageData.box_rate;
    var boxDC = agentPackageData.box_dc;
    console.log(superDC)
    var amounts = {
        "A": singleRate,
        "B": singleRate,
        "C": singleRate,
        "AB": doubleRate,
        "BC": doubleRate,
        "AC": doubleRate,
        "Super": superRate,
        "Box": boxRate,
        "K.Box": boxRate
    };
    var dcs = {
        "A": singleDC,
        "B": singleDC,
        "C": singleDC,
        "AB": doubleDC,
        "BC": doubleDC,
        "AC": doubleDC,
        "Super": superDC,
        "Box": boxDC,
        "K.Box": boxDC
    }


    function createRowsForLink(linkText) {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);

        if (count <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

        if (isNaN(number) || isNaN(count)) {
            alert("Invalid input. Please enter valid numbers for default fields.");
            document.getElementById("numberInput").value = "";
            document.getElementById("countInput").value = "";
            return;
        }

        var tableBody = document.querySelector("#mainTable tbody");
        var newRow = document.createElement("tr");
        var result1 = (count * amounts[linkText]).toFixed(2);
        var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);

        sendDataToDjango(linkText, number, count, result1, result2);
    }

    function createRowsForLinkTwo(linkText) {
        var number = document.getElementById("numberInput").value;
        var count = document.getElementById("countInput").value;

        if (number.length!=2){
            alert("Number must have 2 digits.")
            return;
        }

        if (count <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

        if (isNaN(number) || isNaN(count)) {
            alert("Invalid input. Please enter valid numbers for default fields.");
            document.getElementById("numberInput").value = "";
            document.getElementById("countInput").value = "";
            return;
        }

        var tableBody = document.querySelector("#mainTable tbody");
        var newRow = document.createElement("tr");
        var result1 = (count * amounts[linkText]).toFixed(2);
        var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
        sendDataToDjango(linkText, number, count, result1, result2);
    }

    function createRowsForLinkRTwo(linkText) {
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);

        var startvalid = startInput.value;
        var endvalid = endInput.value;

        if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
            alert("Invalid input")
            document.getElementById("start").value = "";
            document.getElementById("end").value = "";
            document.getElementById("step").value = "";
            document.getElementById("count").value = "";
            return;
        }

        if (start >= end) {
            alert("Start must be less than end.");
            document.getElementById("start").value = "";
            document.getElementById("end").value = "";
            document.getElementById("step").value = "";
            document.getElementById("count").value = "";
            return;
        }

        if (step <= 0) {
            alert("Step must be greater than 0.");
            document.getElementById("start").value = "";
            document.getElementById("end").value = "";
            document.getElementById("step").value = "";
            document.getElementById("count").value = "";
            return;
        }

        if (countConditional <= 0) {
            alert("Count must be greater than 0.");
            document.getElementById("start").value = "";
            document.getElementById("end").value = "";
            document.getElementById("step").value = "";
            document.getElementById("count").value = "";
            return;
        }

        if (startvalid.length!=2 || endvalid.length!=2){
                alert("Start and end must have 2 digits.");
                return;
        }

        console.log("R input")

        const startinput = start;
        const endinput = end;
        const stepinput = step;

        console.log(startinput, endinput, stepinput)

        const differences = generateDifferenceTwo(startinput, endinput, stepinput);
        console.log(differences, "differences");

        var tableBody = document.querySelector("#mainTable tbody");

        differences.forEach(function (difference) {
            var allRow = document.createElement("tr");
            var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
            var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
            sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
        })
    }

    function createRowsForLinkR(linkText) {
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);


        if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
            document.getElementById("start").value = "";
            document.getElementById("end").value = "";
            document.getElementById("step").value = "";
            document.getElementById("count").value = "";
            return;
        }

        if (start >= end) {
            alert("Start must be less than end.");
            document.getElementById("start").value = "";
            document.getElementById("end").value = "";
            document.getElementById("step").value = "";
            document.getElementById("count").value = "";
            return;
        }

        if (step <= 0) {
            alert("Step must be greater than 0.");
            document.getElementById("start").value = "";
            document.getElementById("end").value = "";
            document.getElementById("step").value = "";
            document.getElementById("count").value = "";
            return;
        }

        if (countConditional <= 0) {
            alert("Count must be greater than 0.");
            document.getElementById("start").value = "";
            document.getElementById("end").value = "";
            document.getElementById("step").value = "";
            document.getElementById("count").value = "";
            return;
        }

        console.log("R input")

        const startinput = start;
        const endinput = end;
        const stepinput = step;

        console.log(startinput, endinput, stepinput)

        const differences = generateDifference(startinput, endinput, stepinput);
        console.log(differences, "differences");

        var tableBody = document.querySelector("#mainTable tbody");

        differences.forEach(function (difference) {
            var allRow = document.createElement("tr");
            var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
            var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
            sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
        })
    }


    function removeRowWithContent(content) {
        var table = document.querySelector("#mainTable");
        var rows = table.getElementsByTagName("tr");
        for (var i = 0; i < rows.length; i++) {
            var row = rows[i];
            var cells = row.getElementsByTagName("td");
            for (var j = 0; j < cells.length; j++) {
                if (cells[j].textContent === content) {
                    row.parentNode.removeChild(row);
                    return;
                }
            }
        }
    }


    function generateDifference(startinput, endinput, stepinput) {
        console.log(startinput, endinput, stepinput,"function")
        if (startinput > endinput || stepinput <= 0) {
            // Invalid input parameters
            return [];
        }

        let numbers = [];

        for (let i = startinput; i <= endinput; i += stepinput) {
            numbers.push(i);
            console.log(numbers)
        }
        

        return numbers;
    }

    function generateDifferenceTwo(startinput, endinput, stepinput) {
        console.log(startinput, endinput, stepinput,"function")
        if (startinput > endinput || stepinput <= 0) {
            // Invalid input parameters
            return [];
        }

        let numbers = [];

        for (let i = startinput; i <= endinput; i += stepinput) {
            let paddedNumber = i.toString().padStart(2, '0');
            numbers.push(paddedNumber);
        }
        

        return numbers;
    }

    function generateDifferenceThree(startinput, endinput, stepinput) {
        console.log(startinput, endinput, stepinput,"function")
        if (startinput > endinput || stepinput <= 0) {
            // Invalid input parameters
            return [];
        }

        let numbers = [];

        for (let i = startinput; i <= endinput; i += stepinput) {
            let paddedNumber = i.toString().padStart(3, '0');
            numbers.push(paddedNumber);
        }
        

        return numbers;
    }



</script>

<!-- get combinations -->
<script>
    function getCombinations(inputNumber) {
        const numberStr = inputNumber.toString().padStart(3, '0');
        const result = [];
        if (numberStr.length !== 3) {
            return result;
        }

        for (let i = 0; i < 3; i++) {
            for (let j = 0; j < 3; j++) {
                for (let k = 0; k < 3; k++) {
                    if (i !== j && i !== k && j !== k) {
                        const combination = numberStr[i] + numberStr[j] + numberStr[k];
                        if (!result.includes(combination)) {
                            result.push(combination);
                        }
                    }
                }
            }
        }

        return result;
    }
</script>
<!-- get combinations -->

<!-- all for 1 start -->
<script>
    document.getElementById("ALL1").addEventListener("click", function () {
        var isRChecked = document.getElementById("R").checked;

        if (isRChecked) {
            ["A", "B", "C"].forEach(function (linkText) {
                createRowsForLinkR(linkText);
            });
            updateTotal();
        }
        else {
            ["A", "B", "C"].forEach(function (linkText) {
                createRowsForLink(linkText);
            });
            updateTotal();
        }
        document.getElementById("numberInput").value = "";
        document.getElementById("countInput").value = "";
        document.getElementById("start").value = "";
        document.getElementById("end").value = "";
        document.getElementById("step").value = "";
        document.getElementById("count").value = "";
    });
</script>
<!-- all for 1 end -->

<!-- all for 2 start -->
<script>
    document.getElementById("ALL2").addEventListener("click", function () {
        var isRChecked = document.getElementById("R").checked;
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        if (isRChecked){
            ["AB", "BC", "AC"].forEach(function (linkText) {
            createRowsForLinkRTwo(linkText);
        });
        updateTotal();
        }
        else{
        ["AB", "BC", "AC"].forEach(function (linkText) {
            createRowsForLinkTwo(linkText);
        });
        updateTotal();
        }
        document.getElementById("numberInput").value = "";
        document.getElementById("countInput").value = "";
        document.getElementById("start").value = "";
        document.getElementById("end").value = "";
        document.getElementById("step").value = "";
        document.getElementById("count").value = "";
    });
</script>
<!-- all for 2 end -->

<!-- 1 number game start -->
<script>
    document.getElementById("A").addEventListener("click", function () {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);

        var linkText = "A"; // Set the linkText to "Box"

        var isRChecked = document.getElementById("R").checked;

        if (isRChecked) {
            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            console.log("R input")

            if (start >= end) {
                alert("Start must be less than end.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (step <= 0) {
                alert("Step must be greater than 0.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (countConditional <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            const differences = generateDifference(startinput, endinput, stepinput);

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var uniqueIdentifier = generateUniqueIdentifier();
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                sendDataToDjango(linkText, difference, countConditional, allResult1, allResult2);
            })

        } else {
            // Capture inputs for "number" and "count"
            var number = parseFloat(numberInput.value);
            var count = parseFloat(countInput.value);

            if (count <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (isNaN(number) || isNaN(count)) {
                alert("Invalid input. Please enter valid numbers for default fields.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            console.log("not R input")
            var newRow = document.createElement("tr")
            var uniqueIdentifier = generateUniqueIdentifier();
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            sendDataToDjango(linkText, number, count, result1, result2);
        }
        document.getElementById("numberInput").value = "";
        document.getElementById("countInput").value = "";
        document.getElementById("start").value = "";
        document.getElementById("end").value = "";
        document.getElementById("step").value = "";
        document.getElementById("count").value = "";
    });
</script>

<script>
    document.getElementById("B").addEventListener("click", function () {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);

        var linkText = "B"; // Set the linkText to "Box"

        var isRChecked = document.getElementById("R").checked;

        if (isRChecked) {
            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            console.log("R input")

            if (start >= end) {
                alert("Start must be less than end.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (step <= 0) {
                alert("Step must be greater than 0.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (countConditional <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            const differences = generateDifference(startinput, endinput, stepinput);

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var uniqueIdentifier = generateUniqueIdentifier();
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                sendDataToDjango(linkText, difference, countConditional, allResult1, allResult2);
            })

        } else {
            // Capture inputs for "number" and "count"
            var number = parseFloat(numberInput.value);
            var count = parseFloat(countInput.value);

            if (count <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (isNaN(number) || isNaN(count)) {
                alert("Invalid input. Please enter valid numbers for default fields.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            console.log("not R input")
            var newRow = document.createElement("tr")
            var uniqueIdentifier = generateUniqueIdentifier();
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            sendDataToDjango(linkText, number, count, result1, result2);
        }
        document.getElementById("numberInput").value = "";
        document.getElementById("countInput").value = "";
        document.getElementById("start").value = "";
        document.getElementById("end").value = "";
        document.getElementById("step").value = "";
        document.getElementById("count").value = "";
    });
</script>

<script>
    document.getElementById("C").addEventListener("click", function () {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);

        var linkText = "C"; // Set the linkText to "Box"

        var isRChecked = document.getElementById("R").checked;

        if (isRChecked) {
            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            console.log("R input")

            if (start >= end) {
                alert("Start must be less than end.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (step <= 0) {
                alert("Step must be greater than 0.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (countConditional <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            const differences = generateDifference(startinput, endinput, stepinput);

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                sendDataToDjango(linkText, difference, countConditional, allResult1, allResult2);
            })

        } else {
            // Capture inputs for "number" and "count"
            var number = parseFloat(numberInput.value);
            var count = parseFloat(countInput.value);

            if (count <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (isNaN(number) || isNaN(count)) {
                alert("Invalid input. Please enter valid numbers for default fields.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }
            console.log("not R input")
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            sendDataToDjango(linkText, number, count, result1, result2);
        }
        document.getElementById("numberInput").value = "";
        document.getElementById("countInput").value = "";
        document.getElementById("start").value = "";
        document.getElementById("end").value = "";
        document.getElementById("step").value = "";
        document.getElementById("count").value = "";
    });
</script>
<!-- 1 number game end -->

<!-- 2 numbers game start -->
<script>
    document.getElementById("AB").addEventListener("click", function () {
        var number = document.getElementById("numberInput").value;
        var count = document.getElementById("countInput").value;
        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var step = document.getElementById("step").value;
        var countConditional = document.getElementById("count").value;

        console.log(number,"number")

        var isRChecked = document.getElementById("R").checked;

        var linkText = "AB";

        if (isRChecked){

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            var startvalid = startInput.value;
            var endvalid = endInput.value;

            console.log(start,end,step,countConditional)

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
                alert("Invalid input. Please enter valid numbers for conditional fields.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (step <= 0 || step.toString().length >= 3){
                alert("Invalid step.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (countConditional <= 0){
                alert("Count must be greater than 0.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (start >= end){
                alert("Start must be less than end.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (startvalid.length!=2 || endvalid.length!=2){
                alert("Start and end must have 2 digits.");
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;


            const differences = generateDifferenceTwo(startinput, endinput, stepinput);
            console.log(differences, "differences");

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })
        }
        else{
            console.log(number)

            if (number.length!=2){
                alert("Number must have 2 digits.");
                return;
            }

            if (count <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (isNaN(number) || isNaN(count)) {
                alert("Invalid input. Please enter valid numbers for default fields.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            // Create a new row for "Box"
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            sendDataToDjango(linkText,number,count,result1,result2)
        }
        document.getElementById("numberInput").value = "";
        document.getElementById("countInput").value = "";
        document.getElementById("start").value = "";
        document.getElementById("end").value = "";
        document.getElementById("step").value = "";
        document.getElementById("count").value = "";
    });

</script>

<script>
    document.getElementById("BC").addEventListener("click", function () {
        var number = document.getElementById("numberInput").value;
        var count = document.getElementById("countInput").value;
        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var step = document.getElementById("step").value;
        var countConditional = document.getElementById("count").value;

        console.log(number,"number")

        var isRChecked = document.getElementById("R").checked;

        var linkText = "BC";

        if (isRChecked){

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            var startvalid = startInput.value;
            var endvalid = endInput.value;

            console.log(start,end,step,countConditional)

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
                alert("Invalid input. Please enter valid numbers for conditional fields.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (step <= 0 || step.toString().length >= 3){
                alert("Invalid step.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (countConditional <= 0){
                alert("Count must be greater than 0.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (start >= end){
                alert("Start must be less than end.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (startvalid.length!=2 || endvalid.length!=2){
                alert("Start and end must have 2 digits.");
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;


            const differences = generateDifferenceTwo(startinput, endinput, stepinput);
            console.log(differences, "differences");

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })
        }
        else{
            console.log(number)

            if (number.length!=2){
                alert("Number must have 2 digits.");
                return;
            }

            if (count <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (isNaN(number) || isNaN(count)) {
                alert("Invalid input. Please enter valid numbers for default fields.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            // Create a new row for "Box"
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            sendDataToDjango(linkText,number,count,result1,result2)
        }
        document.getElementById("numberInput").value = "";
        document.getElementById("countInput").value = "";
        document.getElementById("start").value = "";
        document.getElementById("end").value = "";
        document.getElementById("step").value = "";
        document.getElementById("count").value = "";
    });

</script>

<script>
    document.getElementById("AC").addEventListener("click", function () {
        var number = document.getElementById("numberInput").value;
        var count = document.getElementById("countInput").value;
        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var step = document.getElementById("step").value;
        var countConditional = document.getElementById("count").value;

        console.log(number,"number")

        var isRChecked = document.getElementById("R").checked;

        var linkText = "AC";

        if (isRChecked){

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            var startvalid = startInput.value;
            var endvalid = endInput.value;

            console.log(start,end,step,countConditional)

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
                alert("Invalid input. Please enter valid numbers for conditional fields.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (step <= 0 || step.toString().length >= 3){
                alert("Invalid step.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (countConditional <= 0){
                alert("Count must be greater than 0.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (start >= end){
                alert("Start must be less than end.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (startvalid.length!=2 || endvalid.length!=2){
                alert("Start and end must have 2 digits.");
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;


            const differences = generateDifferenceTwo(startinput, endinput, stepinput);
            console.log(differences, "differences");

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })
        }
        else{
            console.log(number)

            if (number.length!=2){
                alert("Number must have 2 digits.");
                return;
            }

            if (count <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (isNaN(number) || isNaN(count)) {
                alert("Invalid input. Please enter valid numbers for default fields.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            // Create a new row for "Box"
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            sendDataToDjango(linkText,number,count,result1,result2)
        }
        document.getElementById("numberInput").value = "";
        document.getElementById("countInput").value = "";
        document.getElementById("start").value = "";
        document.getElementById("end").value = "";
        document.getElementById("step").value = "";
        document.getElementById("count").value = "";
    });

</script>
<!-- 2 numbers game end -->

<!-- 3 numbers game start -->
<script>
    document.getElementById("Super").addEventListener("click", function () {
        var number = document.getElementById("numberInput").value;
        var count = document.getElementById("countInput").value;
        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var step = document.getElementById("step").value;
        var countConditional = document.getElementById("count").value;

        var isRChecked = document.getElementById("R").checked;

        var linkText = "Super";

        if(isRChecked){

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            startvalid = startInput.value;
            endvalid = endInput.value;

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional) || start !== parseInt(start) || end !== parseInt(end) || step !== parseInt(step) || countConditional !== parseInt(countConditional)) {
                alert("Invalid input. Please enter valid numbers for conditional fields.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (step <= 0 || step.toString().length >= 4){
                alert("Invalid step.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (countConditional <= 0){
                alert("Count must be greater than 0.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (start >= end){
                alert("Start must be less than end.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (startvalid.length!=3 || endvalid.length!=3){
                alert("Start and end must have 3 digits.");
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            const differences = generateDifferenceThree(startinput, endinput, stepinput);
            console.log(differences, "differences");

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })
        }
        else{

            if (number.indexOf('.') !== -1){
                alert("This number is not valid.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (number.length!=3){
                alert("Number must have 3 digits.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }


            if (count <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (isNaN(number) || isNaN(count)) {
                alert("Invalid input. Please enter valid numbers for default fields.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            // Create a new row for "Box"
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            sendDataToDjango(linkText,number,count,result1,result2)
        }
        document.getElementById("numberInput").value = "";
        document.getElementById("countInput").value = "";
        document.getElementById("start").value = "";
        document.getElementById("end").value = "";
        document.getElementById("step").value = "";
        document.getElementById("count").value = "";
    });

</script>

<script>
        document.getElementById("ButtonBox").addEventListener("click", function () {
        var number = document.getElementById("numberInput").value;
        var count = document.getElementById("countInput").value;
        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var step = document.getElementById("step").value;
        var countConditional = document.getElementById("count").value;

        var isRChecked = document.getElementById("R").checked;

        var linkText = "Super";

        if (isRChecked){

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            startvalid = startInput.value;
            endvalid = endInput.value;

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional) || start !== parseInt(start) || end !== parseInt(end) || step !== parseInt(step) || countConditional !== parseInt(countConditional)) {
                alert("Invalid input. Please enter valid numbers for conditional fields.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (step <= 0 || step.toString().length >= 4){
                alert("Invalid step.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (countConditional <= 0){
                alert("Count must be greater than 0.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (start >= end){
                alert("Start must be less than end.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (startvalid.length!=3 || endvalid.length!=3){
                alert("Start and end must have 3 digits.");
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            console.log(startinput, endinput, stepinput)

            var differences = generateDifference(startinput, endinput, stepinput);
            console.log(differences);

            differences.forEach(function (difference) {
                console.log(difference);
                var inputNumber = difference.toString();
                var combinations = getCombinations(inputNumber);

                var tableBody = document.querySelector("#mainTable tbody");

                console.log(combinations);
                combinations.forEach(function (combination) {
                    console.log(combination)
                    var allRow = document.createElement("tr");
                    var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                    var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                    sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
                })
            })
        }
        else{

            if (number.indexOf('.') !== -1){
                alert("This number is not valid.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (number.length!=3){
                alert("Number must have 3 digits.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }


            if (count <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (isNaN(number) || isNaN(count)) {
                alert("Invalid input. Please enter valid numbers for default fields.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            const inputNumber = number;
            console.log(inputNumber)
            const combinations = getCombinations(inputNumber);
            console.log(combinations, "combinations");

            var tableBody = document.querySelector("#mainTable tbody");

            combinations.forEach(function (combination) {
                var allRow = document.createElement("tr");
                var allResult1 = (count * amounts[linkText]).toFixed(2);
                var allResult2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
                sendDataToDjango(linkText,combination,count,allResult1,allResult2)
            });
            }
        document.getElementById("numberInput").value = "";
        document.getElementById("countInput").value = "";
        document.getElementById("start").value = "";
        document.getElementById("end").value = "";
        document.getElementById("step").value = "";
        document.getElementById("count").value = "";
    });
</script>

<script>
    document.getElementById("KBox").addEventListener("click", function () {
        var number = document.getElementById("numberInput").value;
        var count = document.getElementById("countInput").value;
        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var step = document.getElementById("step").value;
        var countConditional = document.getElementById("count").value;


        var linkText = "Box"; // Set the linkText to "Box"

        var isRChecked = document.getElementById("R").checked;

        if (isRChecked){

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            startvalid = startInput.value;
            endvalid = endInput.value;

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional) || start !== parseInt(start) || end !== parseInt(end) || step !== parseInt(step) || countConditional !== parseInt(countConditional)) {
                alert("Invalid input. Please enter valid numbers for conditional fields.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (step <= 0 || step.toString().length >= 4){
                alert("Invalid step.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (countConditional <= 0){
                alert("Count must be greater than 0.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (start >= end){
                alert("Start must be less than end.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (startvalid.length!=3 || endvalid.length!=3){
                alert("Start and end must have 3 digits.");
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            console.log(startinput, endinput, stepinput)

            const differences = generateDifferenceThree(startinput, endinput, stepinput);
            console.log(differences, "differences");

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })

        }

        else{

            if (number.indexOf('.') !== -1){
                alert("This number is not valid.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (number.length!=3){
                alert("Number must have 3 digits.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (count <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (isNaN(number) || isNaN(count)) {
                alert("Invalid input. Please enter valid numbers for default fields.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            // Create a new row for "Box"
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            sendDataToDjango(linkText,number,count,result1,result2)
        }
        document.getElementById("numberInput").value = "";
        document.getElementById("countInput").value = "";
        document.getElementById("start").value = "";
        document.getElementById("end").value = "";
        document.getElementById("step").value = "";
        document.getElementById("count").value = "";
    });
</script>

<script>
    document.getElementById("Both").addEventListener("click", function () {
        var number = document.getElementById("numberInput").value;
        var count = document.getElementById("countInput").value;
        var start = document.getElementById("start").value;
        var end = document.getElementById("end").value;
        var step = document.getElementById("step").value;
        var countConditional = document.getElementById("count").value;

        var isRChecked = document.getElementById("R").checked;

        if (isRChecked){

            var tableBody = document.querySelector("#mainTable tbody");

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            startvalid = startInput.value;
            endvalid = endInput.value;

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional) || start !== parseInt(start) || end !== parseInt(end) || step !== parseInt(step) || countConditional !== parseInt(countConditional)) {
                alert("Invalid input. Please enter valid numbers for conditional fields.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (step <= 0 || step.toString().length >= 4){
                alert("Invalid step.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (countConditional <= 0){
                alert("Count must be greater than 0.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (start >= end){
                alert("Start must be less than end.");
                document.getElementById("start").value = "";
                document.getElementById("end").value = "";
                document.getElementById("step").value = "";
                document.getElementById("count").value = "";
                return;
            }

            if (startvalid.length!=3 || endvalid.length!=3){
                alert("Start and end must have 3 digits.");
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            console.log(startinput, endinput, stepinput)

            var differences = generateDifferenceThree(startinput, endinput, stepinput);
            console.log(differences);

            differences.forEach(function (difference) {
                var linkText = "Super"
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })

            differences.forEach(function (difference) {
                var linkText = "Box"
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })

        }

        else{

            if (number.indexOf('.') !== -1){
                alert("This number is not valid.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (number.length!=3){
                alert("Number must have 3 digits.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (count <= 0) {
                alert("Count must be greater than 0.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            if (isNaN(number) || isNaN(count)) {
                alert("Invalid input. Please enter valid numbers for default fields.");
                document.getElementById("numberInput").value = "";
                document.getElementById("countInput").value = "";
                return;
            }

            var tableBody = document.querySelector("#mainTable tbody");

            // Create a row for "Super"
            var linkTextSuper = "Super"
            var superRow = document.createElement("tr");
            var superResult1 = (count * amounts[linkTextSuper]).toFixed(2);
            var superResult2 = (count * (amounts[linkTextSuper] + dcs[linkTextSuper])).toFixed(2);
            sendDataToDjango(linkTextSuper,number,count,superResult1,superResult2)

            // Create a row for "Box"
            var linkTextBox = "Box"
            var boxRow = document.createElement("tr");
            var boxResult1 = (count * amounts[linkTextBox]).toFixed(2);
            var boxResult2 = (count * (amounts[linkTextBox] + dcs[linkTextBox])).toFixed(2);
            sendDataToDjango(linkTextBox,number,count,boxResult1,boxResult2)
        }
        document.getElementById("numberInput").value = "";
        document.getElementById("countInput").value = "";
        document.getElementById("start").value = "";
        document.getElementById("end").value = "";
        document.getElementById("step").value = "";
        document.getElementById("count").value = "";
    });
</script>
<!-- 3 numbers game end -->

<script>
    document.getElementById("button1").addEventListener("click", function () {
        document.getElementById("button1").classList.add("selected-button");
        document.getElementById("button2").classList.remove("selected-button");
        document.getElementById("button3").classList.remove("selected-button");
        document.getElementById("tabSet1").classList.add("show", "active");
        document.getElementById("tabSet2").classList.remove("show", "active");
        document.getElementById("tabSet3").classList.remove("show", "active");
    });

    document.getElementById("button2").addEventListener("click", function () {
        document.getElementById("button1").classList.remove("selected-button");
        document.getElementById("button2").classList.add("selected-button");
        document.getElementById("button3").classList.remove("selected-button");
        document.getElementById("tabSet1").classList.remove("show", "active");
        document.getElementById("tabSet2").classList.add("show", "active");
        document.getElementById("tabSet3").classList.remove("show", "active");
    });

    document.getElementById("button3").addEventListener("click", function () {
        document.getElementById("button1").classList.remove("selected-button");
        document.getElementById("button2").classList.remove("selected-button");
        document.getElementById("button3").classList.add("selected-button");
        document.getElementById("tabSet1").classList.remove("show", "active");
        document.getElementById("tabSet2").classList.remove("show", "active");
        document.getElementById("tabSet3").classList.add("show", "active");
    });
</script>


<script>
    $(document).ready(function () {
        $("#conditionalFields").hide();

        $("input[name='checkbox2']").change(function () {
            if ($(this).is(":checked")) {
                $("#conditionalFields").show();
                $("#defaultFields").hide()
            } else {
                $("#conditionalFields").hide();
                $("#defaultFields").show()
            }
        });
    });
</script>

<script>
    const csrftoken = "{{ csrf_token }}";
</script>



<script>
    let uniqueIdCounter = 1;

    function generateUniqueIdentifier() {
        return uniqueIdCounter++;
}
</script>

<script>
    const dataQueue = [];

async function sendDataToDjango(linkText, value1, value2, value3, value4) {
    const timeId = {{time.id}};
    const customer = document.getElementById("customer").value;
    const propertyOrder = ['customer','linkText', 'value1', 'value2', 'value3', 'value4', 'timeId'];
    const datas = {};

    propertyOrder.forEach(property => {
        datas[property] = eval(property);  // Assuming the variables are in the local scope
    });

    console.log('Adding to queue:', datas);
    dataQueue.push(datas);

    // Check if there's data in the queue
    if (dataQueue.length === 1) {
        processQueue();
    }
}

async function processQueue() {
    // Get the first data object in the queue
    const data = dataQueue[0];

    try {
        // Make the AJAX request and wait for it to complete
        const response = await $.ajax({
            url: '/dealer/check-limit/',
            type: 'POST',
            contentType: 'application/json',
            headers: {
                'X-CSRFToken': csrftoken,
            },
            data: JSON.stringify(data),
        });

        console.log('Data sent successfully:', data);
        console.log('Stringified Data:', JSON.stringify(data));

        // Remove the processed data from the queue
        dataQueue.shift();

        console.log(response);

        if (response.message === 'time over') {
            Swal.fire({
                icon: 'warning',
                title: 'Time over!',
                text: 'Time over for the game.',
                timer: 3000,
                showConfirmButton: false
            });
            location.reload();
        }

        if (response.message === 'Limit exceeded') {
            Swal.fire({
                icon: 'warning',
                title: 'Limit exceeded!',
                text: 'Your daily limit exceeded.',
                timer: 3000,
                showConfirmButton: false
            });
            return;
        }

        if (response.message === 'Blocked number') {
            Swal.fire({
                icon: 'warning',
                title: 'Blocked number!',
                text: 'This number and LSK is blocked.',
                timer: 3000,
                showConfirmButton: false
            });
            return;
        }

        if (response.message === 'LSK blocked') {
            Swal.fire({
                icon: 'warning',
                title: 'LSK limit exceeded!',
                text: 'This LSK limit exceeded.',
                timer: 3000,
                showConfirmButton: false
            });
            return;
        }

        // If there are more items in the queue, process the next one
        if (dataQueue.length > 0) {
            processQueue();
        }

        console.log(response.row_id);

        // Create and append the row after the AJAX request is successful
        var newRow = document.createElement("tr");

        newRow.setAttribute("data-row-id", response.row_id);

        newRow.innerHTML = `
            <td>${data.linkText}</td>
            <td>${data.value1}</td>
            <td>${data.value2}</td>
            <td>${data.value3}</td>
            <td>${data.value4}</td>
            <td><button type="button" onclick="editRow(this)" class="btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
        `;

        var tableBody = document.querySelector("#mainTable tbody");
        tableBody.insertBefore(newRow, tableBody.firstChild);

        updateTotal();
    } catch (error) {
        // Handle error if needed
        console.error('Error sending data:', error.statusText);
    }
}

</script>

<script>

        document.addEventListener("DOMContentLoaded", function() {
            var selectedCustomer = document.getElementById("customer");
            console.log(selectedCustomer);
            // Add an event listener for the "change" event
            selectedCustomer.addEventListener("change", function() {
                // Log the selected value when it changes
                console.log("Customer: " + selectedCustomer.value);
            });
        });


    function saveDataToViews() {
            var totalCount = document.getElementById('totalCount').textContent;
            var totalDAmount = document.getElementById('totalDAmount').textContent;
            var totalCAmount = document.getElementById('totalCAmount').textContent;
            var billId = document.getElementById('bill-id').textContent;
            Swal.fire({
                icon: 'question',
                title: 'Save Bill?',
                html: `<p>Bill No: ${billId}</p>
                        <p>Total Count: ${totalCount}</p>
                        <p>Total Amount: ${totalCAmount}</p>`,
                text: 'Are you sure you want to save.',
                showCancelButton: true,
                cancelButtonText: 'Cancel',
                confirmButtonText: 'Save',
            }).then((result) => {
                if (result.isConfirmed) {
                    const customer = document.getElementById("customer").value;
                    const timeId = {{time.id}};

                    const data = {
                        customer: customer,
                        timeId: timeId,
                    };

                    // Make an AJAX request to save the data to Django views
                    $.ajax({
                        url: '/dealer/save-data/',
                        type: 'POST',
                        contentType: 'application/json',
                        headers: {
                            'X-CSRFToken': csrftoken,
                        },
                        data: JSON.stringify(data),
                        success: function (response) {
                            console.log('Data saved successfully:', response);

                            if (response.message === 'Bill saved') {
                                // Show success message
                                Swal.fire({
                                    icon: 'success',
                                    title: 'Success!',
                                    text: 'Bill saved successfully.',
                                }).then((result) => {
                                    // Reload the page when the user clicks "OK"
                                    if (result.isConfirmed || result.dismiss === Swal.DismissReason.timer) {
                                        location.reload();
                                    }
                                });
                            } else {
                                // Handle other success scenarios if needed
                            }
                        },
                        error: function (error) {
                            console.error('Error saving data:', error);

                            // Show error message
                            Swal.fire({
                                icon: 'error',
                                title: 'Error!',
                                text: 'Failed to save the bill.',
                            });
                        }
                    });
                } else if (result.dismiss === Swal.DismissReason.cancel) {
                    // User clicked "Cancel," do nothing or handle as needed
                }
            });
        }

    
   </script>

<script>
    function updateTotal() {
        console.log("yes");
        var table = document.getElementById("mainTable");
        var rows = table.querySelectorAll("tbody tr");
        var countValues = [];
        var dAmountValues = [];
        var cAmountValues = [];

        rows.forEach(function (row) {
            var countCell = row.cells[2]; // Assuming "count" is in the third cell (index 2)
            var count = parseFloat(countCell.textContent);

            console.log(count,"count")

            var damountCell = row.cells[3];
            var dAmount = parseFloat(damountCell.textContent);

            var camountCell = row.cells[4];
            var cAmount = parseFloat(camountCell.textContent);

            // Check if the count is a valid number before adding it to the array
            if (!isNaN(count)) {
                countValues.push(count);
            }
            if (!isNaN(dAmount)) {
                dAmountValues.push(dAmount);
            }
            if (!isNaN(cAmount)) {
                cAmountValues.push(cAmount);
            }
        });
        console.log(countValues)
        console.log(dAmountValues)
        var total = countValues.reduce(function (accumulator, currentValue) {
            return accumulator + currentValue;
        }, 0);

        var damount = dAmountValues.reduce(function (accumulator, currentValue) {
            return accumulator + currentValue;
        }, 0);

        var camount = cAmountValues.reduce(function (accumulator, currentValue) {
            return accumulator + currentValue;
        }, 0);

        var totalCountSpan = document.getElementById("totalCount");
        totalCountSpan.textContent = total;

        console.log("Total Count:", total);

        var totalDamountSpan = document.getElementById("totalDAmount");
        totalDamountSpan.textContent = damount.toFixed(2);

        console.log("Total D Amount:", damount);

        var totalCamountSpan = document.getElementById("totalCAmount");
        totalCamountSpan.textContent = camount.toFixed(2);

        console.log("Total C Amount:", camount);
    }
</script>

<script>
    let rowToEdit;
    function editRow(button){
        const row = button.parentElement.parentElement;
        const cells = row.getElementsByTagName("td");
        document.getElementById("modalRowLSK").textContent = cells[0].textContent;
        document.getElementById("modalRowNumber").textContent = cells[1].textContent;
        document.getElementById("modalRowCount").textContent = cells[2].textContent;
        rowToEdit = row;
        document.getElementById('editModal').style.display = 'block';
    }

    function closeModal(button) {
        document.getElementById('editModal').style.display = 'none';
        
    }
    
    function updateRow() {
        const rowId = rowToEdit.getAttribute("data-row-id");
        const editedCount = document.getElementById("editedCount").value;
        const url = `/dealer/update-test-row/${rowId}`;
        console.log(editedCount);
        var data = {
            editedCount: editedCount,
        };
        closeModal();
        fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': csrftoken, // Include the CSRF token
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                if (response.ok) {
                    closeModal();
                } else {
                    // Handle errors here
                }
            })
            .catch(error => {
                console.error('Error:', error);
                // Handle errors here
            });

        // Update the count in the row in the HTML
        const cells = rowToEdit.getElementsByTagName("td");
        cells[2].textContent = editedCount;
        
        const lsk = cells[0].textContent;

        updateCell3(cells, lsk, editedCount);

        updateTotal();
        // Close the modal
        closeModal();
    }

    function updateCell3(cells, lsk, editedCount) {
        // Fetch the rate and dc based on LSK
        const rate = amounts[lsk] || 0;
        const dc = dcs[lsk] || 0;

        // Calculate the new value for cells[3] (count * rate)
        const newRate = editedCount * rate;

        const newDC = editedCount * (rate + dc);

        // Update cells[3] with the calculated value
        cells[3].textContent = newRate.toFixed(2);
        cells[4].textContent = newDC.toFixed(2);
    }

    function deleteRow() {
            const rowToDelete = rowToEdit;

            const rowId = rowToEdit.getAttribute("data-row-id");

            console.log(rowId);

            const url = `/dealer/delete-test-row/${rowId}/`;
            fetch(url, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json',
                    'X-CSRFToken': csrftoken, // Include the CSRF token
                },
            })
            .then(response => {
                if (response.ok) {
                    closeModal();
                } else {
                    // Handle errors here
                }
            })
            .catch(error => {
                console.error('Error:', error);
                // Handle errors here
            });

            // Remove the row from the table
            rowToDelete.parentNode.removeChild(rowToDelete);

            // Close the modal
            updateTotal();
            closeModal();
        }




</script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

{% if messages %}
    {% for message in messages %}
        {% if 'blocked_message' in message.tags %}
            <script>
                console.log("blocked")
                document.addEventListener('DOMContentLoaded', function () {
                    Swal.fire({
                        icon: 'warning',
                        title: 'Blocked Number!',
                        text: 'This number and LSK is blocked!',
                        showConfirmButton: false,
                        timer: 3000  // Automatically close after 3 seconds
                    });
                });
            </script>
        {% elif 'limit_message' in message.tags %}
        <script>
            console.log("blocked")
            document.addEventListener('DOMContentLoaded', function () {
                Swal.fire({
                    icon: 'warning',
                    title: 'Limit exceeded!',
                    text: 'Your daily limit exceeded!',
                    showConfirmButton: false,
                    timer: 3000  // Automatically close after 3 seconds
                });
            });
        </script>
        {% else %}
            <script>
                console.log("Limit exceeded")
                document.addEventListener('DOMContentLoaded', function () {
                    Swal.fire({
                        icon: 'error',
                        title: 'Limit Exceeded!',
                        text: 'Limit of this LSK is exceeded!',
                        showConfirmButton: false,
                        timer: 3000  // Automatically close after 3 seconds
                    });
                });
            </script>
        {% endif %}
    {% endfor %}
{% endif %}

<script>
    var i = 0;
   
   function change() {
     var doc = document.getElementById("background");
     var color = [ "PaleGreen","Violet","Orange", "Tomato"];
     doc.style.backgroundColor = color[i];
     i = (i + 1) % color.length;
   }
   
   // Set the initial color to yellow
   document.getElementById("background").style.backgroundColor = "PaleGreen";
   
   // Call the change function immediately after the script loads
   change();
   
   // Set interval for subsequent color changes every 30 minutes
   setInterval(change, 3600000);
   </script>

<script>
    function validateCountInput(input) {
        input.value = input.value.replace(/[^0-9]/g, ''); // Remove non-numeric characters
        if (input.value.length > 2) {
            input.value = input.value.slice(0, 3); // Limit to 2 digits
        }
    }
</script>


<script>
    // Get all elements with the class 'nav-link'
    var navLinks = document.getElementsByClassName('nav-link');

    // Iterate through each 'nav-link' element and add a click event listener
    for (var i = 0; i < navLinks.length; i++) {
        navLinks[i].addEventListener('click', function (event) {
            // Prevent the default link behavior
            event.preventDefault();

            var isRChecked = document.getElementById("R").checked;

            if (isRChecked) {

                var inputElement = document.getElementById("start");
                
                if (inputElement) {
                    inputElement.focus();
                }

            }


            else{

                var inputElement = document.getElementById("numberInput");
                
                if (inputElement) {
                    inputElement.focus();
                }
            }
    
        });
    }
</script>


</div>

<!-- Javascript -->
<script src="{% static 'bundles/libscripts.bundle.js' %}"></script>    
<script src="{% static 'bundles/vendorscripts.bundle.js' %}"></script>

<script src="{% static 'bundles/jvectormap.bundle.js' %}"></script> <!-- JVectorMap Plugin Js -->
<script src="{% static 'bundles/chartist.bundle.js' %}"></script>
<script src="{% static 'bundles/datatablescripts.bundle.js' %}"></script>

<script src="{% static 'bundles/mainscripts.bundle.js' %}"></script>
<script src="{% static 'js/pages/tables/jquery-datatable.js' %}"></script>
<script src="{% static 'js/index7.js' %}"></script>

</body>

</html>