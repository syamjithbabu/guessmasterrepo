{% extends 'agent/partials/base.html' %}
{% load static %}
{% block content %}

<style>
    #mainTable th {
        position: sticky;
        top: 0;
        z-index: 1;
        background-color: white;
        /* To make it appear above the content */
    }
</style>

<div id="main-content">
    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-info">
        {{message}}
    </div>
    {% endfor %}
    {% endif %}

    <div class="container-fluid mt-3">
        <div class="row clearfix">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <div class="card" style="margin-bottom: 10px !important;">
                    <div class="header" style="padding: 10px !important;">
                        <h2>{{time.end_time}}</h2>
                    </div>
                    <form method="POST">
                        <a href="{% url 'agent:save_data' time.id %}" style="position: absolute; top: 0; right: 0;" class="btn btn-success" title="Save">
                            <span class="sr-only">Save</span>
                            <i class="fa fa-save"></i>
                        </a>
                        <div class="body" style="padding: 10px !important;">
                            <div class="row clearfix">
                                <div class="col-lg-3 col-6">
                                    <div class="mb-3">
                                        <select class="form-control show-tick ms select2" data-placeholder="Select">
                                            {% for dealer in dealers %}
                                            <option>{{dealer.user}}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                                <div class="col-lg-3 col-6">
                                    <div class="mb-3">
                                        <select class="form-control show-tick ms select2" data-placeholder="Select">
                                            {% for dealer in dealers %}
                                            <option>{{dealer.user}}</option>
                                            {% endfor %}
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                                <div class="btn-group mr-2" role="group" aria-label="First group">
                                    <button type="button" class="btn btn-secondary" id="button1">1</button>
                                    <button type="button" class="btn btn-secondary" id="button2">2</button>
                                    <button type="button" class="btn btn-secondary" id="button3">3</button>
                                </div>
                                <label class="control-inline fancy-checkbox ml-auto">
                                    <input type="checkbox" name="checkbox2" required data-parsley-mincheck="2"
                                        data-parsley-errors-container="#error-checkbox2" id="R">
                                    <span>R</span>
                                </label>
                            </div>

                            <div id="defaultFields" class="row">
                                <div class="form-group mt-3 col-lg-3 col-6">
                                    <input type="text" class="form-control" id="numberInput" placeholder="Number"
                                        required>
                                </div>
                                <div class="form-group mt-3 col-lg-3 col-6">
                                    <input type="number" class="form-control" id="countInput" placeholder="Count"
                                        required>
                                </div>
                            </div>

                            <!-- only show when R is chacked -->
                            <div id="conditionalFields" class="row">
                                <div class="form-group mt-3 col-lg-3 col-3">
                                    <input type="text" class="form-control" id="start" placeholder="Start" required>
                                </div>
                                <div class="form-group mt-3 col-lg-3 col-3">
                                    <input type="number" class="form-control" id="end" placeholder="End" required>
                                </div>
                                <div class="form-group mt-3 col-lg-3 col-3">
                                    <input type="number" class="form-control" id="step" placeholder="Step" required>
                                </div>
                                <div class="form-group mt-3 col-lg-3 col-3">
                                    <input type="number" class="form-control" id="count" placeholder="Count" required>
                                </div>
                            </div>
                            <!-- only show when R is chacked -->

                            <div class="tab-content" style="padding: 10px !important;">
                                <div class="tab-pane show active" id="tabSet1">
                                    <ul class="nav nav-tabs-new">
                                        <li class="nav-item"><a class="nav-link" data-toggle="tab" id="A" href="">A</a>
                                        </li>
                                        <li class="nav-item"><a class="nav-link" data-toggle="tab" id="B" href="">B</a>
                                        </li>
                                        <li class="nav-item"><a class="nav-link" data-toggle="tab" id="C" href="">C</a>
                                        </li>
                                        <li class="nav-item"><a class="nav-link" data-toggle="tab" id="ALL1"
                                                href="">ALL</a></li>
                                    </ul>
                                </div>
                                <div class="tab-pane" id="tabSet2">
                                    <ul class="nav nav-tabs-new">
                                        <li class="nav-item"><a class="nav-link" data-toggle="tab" id="AB"
                                                href="">AB</a></li>
                                        <li class="nav-item"><a class="nav-link" data-toggle="tab" id="BC"
                                                href="">BC</a></li>
                                        <li class="nav-item"><a class="nav-link" data-toggle="tab" id="AC"
                                                href="">AC</a></li>
                                        <li class="nav-item"><a class="nav-link" data-toggle="tab" id="ALL2"
                                                href="">ALL</a></li>
                                    </ul>
                                </div>
                                <div class="tab-pane" id="tabSet3">
                                    <ul class="nav nav-tabs-new">
                                        <li class="nav-item"><a class="nav-link" data-toggle="tab" id="Super"
                                                href="">Super</a>
                                        </li>
                                        <li class="nav-item"><a class="nav-link" data-toggle="tab" id="ButtonBox"
                                                href="">Box</a></li>
                                        <li class="nav-item"><a class="nav-link" data-toggle="tab" id="KBox"
                                                href="">K.Box</a>
                                        </li>
                                        <li class="nav-item"><a class="nav-link" data-toggle="tab" id="Both"
                                                href="">Both</a></li>
                                    </ul>
                                </div>
                            </div>
                            <!-- jdj -->

                        </div>


                    </form>
                </div>
            </div>
        </div>
        <!-- #END# Select2 -->

    </div>

    <div class="container-fluid">
        <div class="row clearfix">
            <div class="col-lg-12">
                <div class="card">
                    <div class="body" style="padding: 10px !important;">
                        <div class="table-container" style="max-height: 300px; overflow-y: auto;">
                            <table id="mainTable" class="table table-hover" style="table-layout: fixed; width: 100%;">
                                <thead>
                                    <tr>
                                        <th colspan="2">Count: <span id="totalCount">0</span></th>
                                        <th colspan="2">AMT: <span id="totalDAmount">0.00</span></th>
                                        <th colspan="2">TOT: <span id="totalCAmount">0.00</span></th>
                                    </tr>
                                    <tr>
                                        <th>LSK</th>
                                        <th>No</th>
                                        <th>Count</th>
                                        <th>D.AMT</th>
                                        <th>C.AMT</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>

</div>


<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>


<script>

    var button1 = document.getElementById("button1");
    var button2 = document.getElementById("button2");
    var button3 = document.getElementById("button3");

    var numberInput = document.getElementById("numberInput");
    var countInput = document.getElementById("countInput");

    var startInput = document.getElementById("start")
    var endInput = document.getElementById("end")
    var stepInput = document.getElementById("step")
    var countInput2 = document.getElementById("count")

    var maxDigits = 1;

    button1.addEventListener("click", function () {
        maxDigits = 1;
        numberInput.value = "";
        numberInput.maxLength = maxDigits;
        numberInput.focus();
    });

    button2.addEventListener("click", function () {
        maxDigits = 2;
        numberInput.value = "";
        numberInput.maxLength = maxDigits;
        numberInput.focus();
    });

    button3.addEventListener("click", function () {
        maxDigits = 3;
        numberInput.value = "";
        numberInput.maxLength = maxDigits;
        numberInput.focus();
    });

    button1.addEventListener("click", function () {
        maxDigits = 1;
        startInput.value = "";
        startInput.maxLength = maxDigits;
        startInput.focus();
    });

    button2.addEventListener("click", function () {
        maxDigits = 2;
        startInput.value = "";
        startInput.maxLength = maxDigits;
        startInput.focus();
    });

    button3.addEventListener("click", function () {
        maxDigits = 3;
        startInput.value = "";
        startInput.maxLength = maxDigits;
        startInput.focus();
    });

    numberInput.addEventListener("input", function () {
        if (numberInput.value.length === maxDigits) {
            countInput.focus();
        }
    });

    startInput.addEventListener("input", function () {
        if (startInput.value.length === maxDigits) {
            endInput.focus();
        }
    });

    endInput.addEventListener("input", function () {
        if (endInput.value.length === maxDigits) {
            stepInput.focus();
        }
    });

    stepInput.addEventListener("input", function () {
        if (stepInput.value.length === maxDigits) {
            countInput2.focus();
        }
    });

</script>


<script>
    var agentPackageData = {
        package_name: "{{ agent_package.package_name }}",
        single_rate: {{ agent_package.single_rate }},
        single_dc: {{ agent_package.single_dc }},
        double_rate: {{ agent_package.double_rate }},
        double_dc: {{ agent_package.double_dc }},
        super_rate: {{ agent_package.super_rate }},
        super_dc: {{ agent_package.super_dc }},
        box_rate: {{ agent_package.box_rate }},
        box_dc: {{ agent_package.box_dc }},
    };
    var singleRate = agentPackageData.single_rate;
    var singleDC = agentPackageData.single_dc;
    var doubleRate = agentPackageData.double_rate;
    var doubleDC = agentPackageData.double_dc;
    var superRate = agentPackageData.super_rate;
    var superDC = agentPackageData.super_dc;
    var boxRate = agentPackageData.box_rate;
    var boxDC = agentPackageData.box_dc;
    console.log(superDC)
    var amounts = {
        "A": singleRate,
        "B": singleRate,
        "C": singleRate,
        "AB": doubleRate,
        "BC": doubleRate,
        "AC": doubleRate,
        "Super": superRate,
        "Box": boxRate,
        "K.Box": boxRate
    };
    var dcs = {
        "A": singleDC,
        "B": singleDC,
        "C": singleDC,
        "AB": doubleDC,
        "BC": doubleDC,
        "AC": doubleDC,
        "Super": superDC,
        "Box": boxDC,
        "K.Box": boxDC
    }


    function createRowsForLink(linkText) {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);

        if (isNaN(number) || isNaN(count)) {
            console.log("Invalid input. Please enter valid numbers.");
            return;
        }

        var tableBody = document.querySelector("#mainTable tbody");
        var newRow = document.createElement("tr");
        var result1 = (count * amounts[linkText]).toFixed(2);
        var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);

        newRow.innerHTML = `
        <td>${linkText}</td>
        <td>${number.toString().padStart(2, '0')}</td>
        <td>${count}</td>
        <td>${result1}</td>
        <td>${result2}</td>
        <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
    `;

        tableBody.appendChild(newRow);
        updateTotal();
        sendDataToDjango(linkText, number, count, result1, result2);
    }

    function createRowsForLinkR(linkText) {
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);


        if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
            console.log("Invalid input. Please enter valid numbers for conditional fields.");
            return;
        }

        console.log("R input")

        const startinput = start;
        const endinput = end;
        const stepinput = step;

        console.log(startinput, endinput, stepinput)

        const differences = generateDifferenceTwo(startinput, endinput, stepinput);
        console.log(differences, "differences");

        var tableBody = document.querySelector("#mainTable tbody");

        differences.forEach(function (difference) {
            var allRow = document.createElement("tr");
            var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
            var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
            allRow.innerHTML = `
                <td>${linkText}</td>
                <td>${difference}</td> <!-- Display the combination in this cell -->
                <td>${countConditional}</td>
                <td>${allResult1}</td>
                <td>${allResult2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                `;
            tableBody.appendChild(allRow);
            updateTotal();
            sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
        })
    }


    function removeRowWithContent(content) {
        var table = document.querySelector("#mainTable");
        var rows = table.getElementsByTagName("tr");
        for (var i = 0; i < rows.length; i++) {
            var row = rows[i];
            var cells = row.getElementsByTagName("td");
            for (var j = 0; j < cells.length; j++) {
                if (cells[j].textContent === content) {
                    row.parentNode.removeChild(row);
                    return;
                }
            }
        }
    }


    function generateDifference(startinput, endinput, stepinput) {
        console.log(startinput, endinput, stepinput,"function")
        if (startinput > endinput || stepinput <= 0) {
            // Invalid input parameters
            return [];
        }

        let numbers = [];

        for (let i = startinput; i <= endinput; i += stepinput) {
            numbers.push(i);
            console.log(numbers)
        }
        

        return numbers;
    }

    function generateDifferenceTwo(startinput, endinput, stepinput) {
        console.log(startinput, endinput, stepinput,"function")
        if (startinput > endinput || stepinput <= 0) {
            // Invalid input parameters
            return [];
        }

        let numbers = [];

        for (let i = startinput; i <= endinput; i += stepinput) {
            let paddedNumber = i.toString().padStart(2, '0');
            numbers.push(paddedNumber);
        }
        

        return numbers;
    }

    function generateDifferenceThree(startinput, endinput, stepinput) {
        console.log(startinput, endinput, stepinput,"function")
        if (startinput > endinput || stepinput <= 0) {
            // Invalid input parameters
            return [];
        }

        let numbers = [];

        for (let i = startinput; i <= endinput; i += stepinput) {
            let paddedNumber = i.toString().padStart(3, '0');
            numbers.push(paddedNumber);
        }
        

        return numbers;
    }



</script>

<script>
    // Define the getCombinations function outside of the click event listener
    function getCombinations(inputNumber) {
        const numberStr = inputNumber.toString().padStart(3, '0');
        const result = [];
        if (numberStr.length !== 3) {
            return result;
        }

        // Generate all combinations with unique digits
        for (let i = 0; i < 3; i++) {
            for (let j = 0; j < 3; j++) {
                for (let k = 0; k < 3; k++) {
                    if (i !== j && i !== k && j !== k) {
                        const combination = numberStr[i] + numberStr[j] + numberStr[k];
                        if (!result.includes(combination)) {
                            result.push(combination);
                        }
                    }
                }
            }
        }

        return result;
    }


    document.getElementById("ButtonBox").addEventListener("click", function () {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);

        var isRChecked = document.getElementById("R").checked;

        var linkText = "Super";

        if (isRChecked){

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            console.log(startinput, endinput, stepinput)

            var differences = generateDifference(startinput, endinput, stepinput);
            console.log(differences);

            differences.forEach(function (difference) {
                console.log(difference);
                var inputNumber = difference.toString();
                var combinations = getCombinations(inputNumber);

                var tableBody = document.querySelector("#mainTable tbody");

                console.log(combinations);
                combinations.forEach(function (combination) {
                    console.log(combination)
                    var allRow = document.createElement("tr");
                    var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                    var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);

                    allRow.innerHTML = `
                        <td>${linkText}</td>
                        <td>${combination}</td> <!-- Display the combination in this cell -->
                        <td>${countConditional}</td>
                        <td>${allResult1}</td>
                        <td>${allResult2}</td>
                        <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                    `;

                    tableBody.appendChild(allRow);
                    updateTotal();
                    sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
                })
            })
        }
        else{
            if (isNaN(number) || isNaN(count)) {
                console.log("Invalid input. Please enter valid numbers.");
                return;
            }

            const inputNumber = number;
            console.log(inputNumber)
            const combinations = getCombinations(inputNumber);
            console.log(combinations, "combinations");

            var tableBody = document.querySelector("#mainTable tbody");

            combinations.forEach(function (combination) {
                var allRow = document.createElement("tr");
                var allResult1 = (count * amounts[linkText]).toFixed(2);
                var allResult2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
                allRow.innerHTML = `
            <td>${linkText}</td>
            <td>${combination}</td> <!-- Display the combination in this cell -->
            <td>${count}</td>
            <td>${allResult1}</td>
            <td>${allResult2}</td>
            <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
            `;
                tableBody.appendChild(allRow);
                updateTotal();
                sendDataToDjango(linkText,combination,count,allResult1,allResult2)
            });
            }
    });

</script>

<script>
    document.getElementById("ALL1").addEventListener("click", function () {
        var isRChecked = document.getElementById("R").checked;

        if (isRChecked) {
            ["A", "B", "C"].forEach(function (linkText) {
                createRowsForLinkR(linkText);
            });
            updateTotal();
        }
        else {
            ["A", "B", "C"].forEach(function (linkText) {
                createRowsForLink(linkText);
            });
            updateTotal();
        }
    });
</script>

<script>
    document.getElementById("ALL2").addEventListener("click", function () {
        var isRChecked = document.getElementById("R").checked;
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        if (isRChecked){
            ["AB", "BC", "AC"].forEach(function (linkText) {
            createRowsForLinkR(linkText);
        });
        updateTotal();
        }
        else{
        ["AB", "BC", "AC"].forEach(function (linkText) {
            createRowsForLink(linkText);
        });
        updateTotal();
        }
    });
</script>

<script>
    document.getElementById("Both").addEventListener("click", function () {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);

        var isRChecked = document.getElementById("R").checked;

        if (isRChecked){

            var tableBody = document.querySelector("#mainTable tbody");

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            console.log(startinput, endinput, stepinput)

            var differences = generateDifferenceThree(startinput, endinput, stepinput);
            console.log(differences);

            differences.forEach(function (difference) {
                var linkText = "Super"
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                allRow.innerHTML = `
                    <td>${linkText}</td>
                    <td>${difference}</td> <!-- Display the combination in this cell -->
                    <td>${countConditional}</td>
                    <td>${allResult1}</td>
                    <td>${allResult2}</td>
                    <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                    `;
                tableBody.appendChild(allRow);
                updateTotal();
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })

            differences.forEach(function (difference) {
                var linkText = "Box"
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                allRow.innerHTML = `
                    <td>${linkText}</td>
                    <td>${difference}</td> <!-- Display the combination in this cell -->
                    <td>${countConditional}</td>
                    <td>${allResult1}</td>
                    <td>${allResult2}</td>
                    <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                    `;
                tableBody.appendChild(allRow);
                updateTotal();
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })

        }

        else{
            if (isNaN(number) || isNaN(count)) {
                console.log("Invalid input. Please enter valid numbers.");
                return;
            }

            var tableBody = document.querySelector("#mainTable tbody");

            // Create a row for "Super"
            var linkTextSuper = "Super"
            var superRow = document.createElement("tr");
            var superResult1 = (count * amounts[linkTextSuper]).toFixed(2);
            var superResult2 = (count * (amounts[linkTextSuper] + dcs[linkTextSuper])).toFixed(2);
            superRow.innerHTML = `
                <td>${linkTextSuper}</td>
                <td>${number.toString().padStart(3, '0')}</td> <!-- Leave the combination cell empty -->
                <td>${count}</td>
                <td>${superResult1}</td>
                <td>${superResult2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
            `;
            tableBody.appendChild(superRow);
            updateTotal();
            sendDataToDjango(linkTextSuper,number,count,superResult1,superResult2)

            // Create a row for "Box"
            var linkTextBox = "Box"
            var boxRow = document.createElement("tr");
            var boxResult1 = (count * amounts[linkTextBox]).toFixed(2);
            var boxResult2 = (count * (amounts[linkTextBox] + dcs[linkTextBox])).toFixed(2);
            boxRow.innerHTML = `
                <td>${linkTextBox}</td>
                <td>${number.toString().padStart(3, '0')}</td> <!-- Leave the combination cell empty -->
                <td>${count}</td>
                <td>${boxResult1}</td>
                <td>${boxResult2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
            `;

            // Append both rows to the table
            tableBody.appendChild(boxRow);
            updateTotal();
            sendDataToDjango(linkTextBox,number,count,boxResult1,boxResult2)
        }
    });
</script>


<script>
    document.getElementById("KBox").addEventListener("click", function () {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);


        var linkText = "Box"; // Set the linkText to "Box"

        var isRChecked = document.getElementById("R").checked;

        if (isRChecked){

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            console.log(startinput, endinput, stepinput)

            const differences = generateDifferenceThree(startinput, endinput, stepinput);
            console.log(differences, "differences");

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                allRow.innerHTML = `
                    <td>${linkText}</td>
                    <td>${difference}</td> <!-- Display the combination in this cell -->
                    <td>${countConditional}</td>
                    <td>${allResult1}</td>
                    <td>${allResult2}</td>
                    <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                    `;
                tableBody.appendChild(allRow);
                updateTotal();
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })

        }

        else{
            if (isNaN(number) || isNaN(count)) {
                console.log("Invalid input. Please enter valid numbers.");
                return;
            }

            // Create a new row for "Box"
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            newRow.innerHTML = `
                <td>${linkText}</td>
                <td>${number.toString().padStart(3, '0')}</td>
                <td>${count}</td>
                <td>${result1}</td>
                <td>${result2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
            `;

            // Add the new row to the table
            var tableBody = document.querySelector("#mainTable tbody");
            tableBody.appendChild(newRow);
            updateTotal();
            sendDataToDjango(linkText,number,count,result1,result2)
        }
        });
</script>

<script>
    document.getElementById("A").addEventListener("click", function () {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);

        var linkText = "A"; // Set the linkText to "Box"
        console.log(linkText)

        console.log(start, end, step, countConditional)

        var isRChecked = document.getElementById("R").checked;
        console.log(isRChecked, "True")

        if (isRChecked) {
            // Capture inputs for "start," "end," "step," and "count"
            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            console.log("R input")
            console.log(start, end, step, countConditional)

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
                console.log("Invalid input. Please enter valid numbers for conditional fields.");
                return;
            }

            console.log("R input")

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            console.log(startinput, endinput, stepinput)

            const differences = generateDifference(startinput, endinput, stepinput);
            console.log(differences, "differences");

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                allRow.innerHTML = `
                    <td>${linkText}</td>
                    <td>${difference}</td> <!-- Display the combination in this cell -->
                    <td>${countConditional}</td>
                    <td>${allResult1}</td>
                    <td>${allResult2}</td>
                    <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                    `;
                tableBody.appendChild(allRow);
                updateTotal();
                sendDataToDjango(linkText, difference, countConditional, allResult1, allResult2);
            })

        } else {
            // Capture inputs for "number" and "count"
            var number = parseFloat(numberInput.value);
            var count = parseFloat(countInput.value);

            if (isNaN(number) || isNaN(count)) {
                console.log("Invalid input. Please enter valid numbers for default fields.");
                return;
            }
            console.log("not R input")
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            newRow.innerHTML = `
                        <td>${linkText}</td>
                        <td>${number}</td>
                        <td>${count}</td>
                        <td>${result1}</td>
                        <td>${result2}</td>
                        <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                    `;

            // Add the new row to the table
            var tableBody = document.querySelector("#mainTable tbody");
            tableBody.appendChild(newRow);
            updateTotal()
            sendDataToDjango(linkText, number, count, result1, result2);
        }
    });
</script>

<script>
    document.getElementById("B").addEventListener("click", function () {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);

        var linkText = "B"; // Set the linkText to "Box"
        console.log(linkText)

        console.log(start, end, step, countConditional)

        var isRChecked = document.getElementById("R").checked;
        console.log(isRChecked, "True")

        if (isRChecked) {
            // Capture inputs for "start," "end," "step," and "count"
            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            console.log("R input")
            console.log(start, end, step, countConditional)

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
                console.log("Invalid input. Please enter valid numbers for conditional fields.");
                return;
            }

            console.log("R input")

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            console.log(startinput, endinput, stepinput)

            const differences = generateDifference(startinput, endinput, stepinput);
            console.log(differences, "differences");

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                allRow.innerHTML = `
                <td>${linkText}</td>
                <td>${difference}</td> <!-- Display the combination in this cell -->
                <td>${countConditional}</td>
                <td>${allResult1}</td>
                <td>${allResult2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                `;
                tableBody.appendChild(allRow);
                updateTotal();
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })

        } else {
            // Capture inputs for "number" and "count"
            var number = parseFloat(numberInput.value);
            var count = parseFloat(countInput.value);

            if (isNaN(number) || isNaN(count)) {
                console.log("Invalid input. Please enter valid numbers for default fields.");
                return;
            }
            console.log("not R input")
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            newRow.innerHTML = `
                    <td>${linkText}</td>
                    <td>${number}</td>
                    <td>${count}</td>
                    <td>${result1}</td>
                    <td>${result2}</td>
                    <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                `;

            // Add the new row to the table
            var tableBody = document.querySelector("#mainTable tbody");
            tableBody.appendChild(newRow);
            updateTotal()
            sendDataToDjango(linkText,number,count,result1,result2)
        }
    });
</script>

<script>
    document.getElementById("C").addEventListener("click", function () {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);

        var linkText = "C"; // Set the linkText to "Box"
        console.log(linkText)

        console.log(start, end, step, countConditional)

        var isRChecked = document.getElementById("R").checked;
        console.log(isRChecked, "True")

        if (isRChecked) {
            // Capture inputs for "start," "end," "step," and "count"
            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            console.log("R input")
            console.log(start, end, step, countConditional)

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
                console.log("Invalid input. Please enter valid numbers for conditional fields.");
                return;
            }

            console.log("R input")

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            console.log(startinput, endinput, stepinput)

            const differences = generateDifference(startinput, endinput, stepinput);
            console.log(differences, "differences");

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                allRow.innerHTML = `
                <td>${linkText}</td>
                <td>${difference}</td> <!-- Display the combination in this cell -->
                <td>${countConditional}</td>
                <td>${allResult1}</td>
                <td>${allResult2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                `;
                tableBody.appendChild(allRow);
                updateTotal();
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })

        } else {
            // Capture inputs for "number" and "count"
            var number = parseFloat(numberInput.value);
            var count = parseFloat(countInput.value);

            if (isNaN(number) || isNaN(count)) {
                console.log("Invalid input. Please enter valid numbers for default fields.");
                return;
            }
            console.log("not R input")
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            newRow.innerHTML = `
                    <td>${linkText}</td>
                    <td>${number}</td>
                    <td>${count}</td>
                    <td>${result1}</td>
                    <td>${result2}</td>
                    <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                `;

            // Add the new row to the table
            var tableBody = document.querySelector("#mainTable tbody");
            tableBody.appendChild(newRow);
            updateTotal()
            sendDataToDjango(linkText,number,count,result1,result2)
        }
    });
</script>

<script>
    document.getElementById("AB").addEventListener("click", function () {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);

        var isRChecked = document.getElementById("R").checked;

        var linkText = "AB";

        if (isRChecked){

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
                console.log("Invalid input. Please enter valid numbers for conditional fields.");
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;


            const differences = generateDifferenceTwo(startinput, endinput, stepinput);
            console.log(differences, "differences");

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                allRow.innerHTML = `
                <td>${linkText}</td>
                <td>${difference}</td> <!-- Display the combination in this cell -->
                <td>${countConditional}</td>
                <td>${allResult1}</td>
                <td>${allResult2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                `;
                tableBody.appendChild(allRow);
                updateTotal();
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })
        }
        else{
            if (isNaN(number) || isNaN(count)) {
                console.log("Invalid input. Please enter valid numbers.");
                return;
            }

            // Create a new row for "Box"
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            newRow.innerHTML = `
                <td>${linkText}</td>
                <td>${number.toString().padStart(2, '0')}</td>
                <td>${count}</td>
                <td>${result1}</td>
                <td>${result2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
            `;

            // Add the new row to the table
            var tableBody = document.querySelector("#mainTable tbody");
            tableBody.appendChild(newRow);
            updateTotal()
            sendDataToDjango(linkText,number,count,result1,result2)
        }
    });

</script>

<script>
    document.getElementById("BC").addEventListener("click", function () {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);

        var isRChecked = document.getElementById("R").checked;

        var linkText = "BC";

        if (isRChecked){

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
                console.log("Invalid input. Please enter valid numbers for conditional fields.");
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            const differences = generateDifferenceTwo(startinput, endinput, stepinput);
            console.log(differences, "differences");

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                allRow.innerHTML = `
                <td>${linkText}</td>
                <td>${difference}</td> <!-- Display the combination in this cell -->
                <td>${countConditional}</td>
                <td>${allResult1}</td>
                <td>${allResult2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                `;
                tableBody.appendChild(allRow);
                updateTotal();
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })
        }
        else{
            if (isNaN(number) || isNaN(count)) {
                console.log("Invalid input. Please enter valid numbers.");
                return;
            }

            // Create a new row for "Box"
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            newRow.innerHTML = `
                <td>${linkText}</td>
                <td>${number.toString().padStart(2, '0')}</td>
                <td>${count}</td>
                <td>${result1}</td>
                <td>${result2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
            `;

            // Add the new row to the table
            var tableBody = document.querySelector("#mainTable tbody");
            tableBody.appendChild(newRow);
            updateTotal()
            sendDataToDjango(linkText,number,count,result1,result2)
        }
    });
</script>

<script>
    document.getElementById("AC").addEventListener("click", function () {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);

        var isRChecked = document.getElementById("R").checked;

        var linkText = "AC";

        if (isRChecked){

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
                console.log("Invalid input. Please enter valid numbers for conditional fields.");
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            const differences = generateDifferenceTwo(startinput, endinput, stepinput);
            console.log(differences, "differences");

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                allRow.innerHTML = `
                <td>${linkText}</td>
                <td>${difference}</td> <!-- Display the combination in this cell -->
                <td>${countConditional}</td>
                <td>${allResult1}</td>
                <td>${allResult2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                `;
                tableBody.appendChild(allRow);
                updateTotal();
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })
        }
        else{
            if (isNaN(number) || isNaN(count)) {
                console.log("Invalid input. Please enter valid numbers.");
                return;
            }

            // Create a new row for "Box"
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            newRow.innerHTML = `
                <td>${linkText}</td>
                <td>${number.toString().padStart(2, '0')}</td>
                <td>${count}</td>
                <td>${result1}</td>
                <td>${result2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
            `;

            // Add the new row to the table
            var tableBody = document.querySelector("#mainTable tbody");
            tableBody.appendChild(newRow);
            updateTotal()
            sendDataToDjango(linkText,number,count,result1,result2)
        }
    });
</script>

<script>
    document.getElementById("Super").addEventListener("click", function () {
        var number = parseFloat(document.getElementById("numberInput").value);
        var count = parseFloat(document.getElementById("countInput").value);
        var start = parseFloat(document.getElementById("start").value);
        var end = parseFloat(document.getElementById("end").value);
        var step = parseFloat(document.getElementById("step").value);
        var countConditional = parseFloat(document.getElementById("count").value);

        var isRChecked = document.getElementById("R").checked;

        var linkText = "Super";

        if(isRChecked){

            var start = parseFloat(startInput.value);
            var end = parseFloat(endInput.value);
            var step = parseFloat(stepInput.value);
            var countConditional = parseFloat(countInput2.value);

            if (isNaN(start) || isNaN(end) || isNaN(step) || isNaN(countConditional)) {
                console.log("Invalid input. Please enter valid numbers for conditional fields.");
                return;
            }

            const startinput = start;
            const endinput = end;
            const stepinput = step;

            const differences = generateDifferenceThree(startinput, endinput, stepinput);
            console.log(differences, "differences");

            var tableBody = document.querySelector("#mainTable tbody");

            differences.forEach(function (difference) {
                var allRow = document.createElement("tr");
                var allResult1 = (countConditional * amounts[linkText]).toFixed(2);
                var allResult2 = (countConditional * (amounts[linkText] + dcs[linkText])).toFixed(2);
                allRow.innerHTML = `
                <td>${linkText}</td>
                <td>${difference}</td> <!-- Display the combination in this cell -->
                <td>${countConditional}</td>
                <td>${allResult1}</td>
                <td>${allResult2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
                `;
                tableBody.appendChild(allRow);
                updateTotal();
                sendDataToDjango(linkText,difference,countConditional,allResult1,allResult2)
            })
        }
        else{
            if (isNaN(number) || isNaN(count)) {
                console.log("Invalid input. Please enter valid numbers.");
                return;
            }

            // Create a new row for "Box"
            var newRow = document.createElement("tr");
            var result1 = (count * amounts[linkText]).toFixed(2);
            var result2 = (count * (amounts[linkText] + dcs[linkText])).toFixed(2);
            newRow.innerHTML = `
                <td>${linkText}</td>
                <td>${number.toString().padStart(3, '0')}</td>
                <td>${count}</td>
                <td>${result1}</td>
                <td>${result2}</td>
                <td><button type="button" class="btn btn-info" title="Edit"><i class="fa fa-edit"></i></button></td>
            `;

            // Add the new row to the table
            var tableBody = document.querySelector("#mainTable tbody");
            tableBody.appendChild(newRow);
            updateTotal()
            sendDataToDjango(linkText,number,count,result1,result2)
        }
    });

function isValidInputThree(start, end) {
    if (isNaN(start) || isNaN(end) || start < 100 || start > 999 || end < 100 || end > 999 || start >= end) {
        return false;
    }
    return true;
}
</script>

<script>
    document.getElementById("button1").addEventListener("click", function () {
        document.getElementById("tabSet1").classList.add("show", "active");
        document.getElementById("tabSet2").classList.remove("show", "active");
        document.getElementById("tabSet3").classList.remove("show", "active");
    });

    document.getElementById("button2").addEventListener("click", function () {
        document.getElementById("tabSet1").classList.remove("show", "active");
        document.getElementById("tabSet2").classList.add("show", "active");
        document.getElementById("tabSet3").classList.remove("show", "active");
    });

    document.getElementById("button3").addEventListener("click", function () {
        document.getElementById("tabSet1").classList.remove("show", "active");
        document.getElementById("tabSet2").classList.remove("show", "active");
        document.getElementById("tabSet3").classList.add("show", "active");
    });
</script>

<script>
    function updateTotal() {
        var table = document.getElementById("mainTable");
        var rows = table.querySelectorAll("tbody tr");
        var countValues = [];
        var dAmountValues = [];
        var cAmountValues = [];

        rows.forEach(function (row) {
            var countCell = row.cells[2]; // Assuming "count" is in the third cell (index 2)
            var count = parseFloat(countCell.textContent);

            var damountCell = row.cells[3];
            var dAmount = parseFloat(damountCell.textContent);

            var camountCell = row.cells[4];
            var cAmount = parseFloat(camountCell.textContent);

            // Check if the count is a valid number before adding it to the array
            if (!isNaN(count)) {
                countValues.push(count);
            }
            if (!isNaN(dAmount)) {
                dAmountValues.push(dAmount);
            }
            if (!isNaN(cAmount)) {
                cAmountValues.push(cAmount);
            }
        });
        console.log(countValues)
        console.log(dAmountValues)
        var total = countValues.reduce(function (accumulator, currentValue) {
            return accumulator + currentValue;
        }, 0);

        var damount = dAmountValues.reduce(function (accumulator, currentValue) {
            return accumulator + currentValue;
        }, 0);

        var camount = cAmountValues.reduce(function (accumulator, currentValue) {
            return accumulator + currentValue;
        }, 0);

        var totalCountSpan = document.getElementById("totalCount");
        totalCountSpan.textContent = total;

        console.log("Total Count:", total);

        var totalDamountSpan = document.getElementById("totalDAmount");
        totalDamountSpan.textContent = damount.toFixed(2);

        console.log("Total D Amount:", damount);

        var totalCamountSpan = document.getElementById("totalCAmount");
        totalCamountSpan.textContent = camount.toFixed(2);

        console.log("Total C Amount:", camount);
    }
</script>

<script>
    $(document).ready(function () {
        $("#conditionalFields").hide();

        $("input[name='checkbox2']").change(function () {
            if ($(this).is(":checked")) {
                $("#conditionalFields").show();
                $("#defaultFields").hide()
            } else {
                $("#conditionalFields").hide();
                $("#defaultFields").show()
            }
        });
    });
</script>

<script>
    const csrftoken = "{{ csrf_token }}";
</script>

<script>
    function sendDataToDjango(linkText, value1, value2, value3, value4) {
    const timeId = {{time.id}};
    console.log(timeId) 
    // Define the data to be sent to the Django backend
    console.log(linkText, value1, value2, value3, value4)
    var data = {
        linkText: linkText,
        value1: value1,
        value2: value2,
        value3: value3,
        value4: value4,
        timeId: timeId,
    };

    console.log(data)
    // Send the data to the Django backend using a fetch() POST request
    fetch('/agent/submit-data/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': csrftoken,
        },
        body: JSON.stringify(data)
    })
    .then(response => {
        if (response.ok) {
            // Data was successfully sent to the server
            // You can handle the response here if needed
        } else {
            // Handle error
        }
    })
    .catch(error => {
        console.error('Error:', error);
    });
}
</script>



{% endblock %}